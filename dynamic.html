
<!doctype html>
<html>
<head>
  <title>Octoblu Astral Plane</title>
  <link rel="stylesheet" type="text/css" href="dist/jquery.gridster.css">
  <link rel="stylesheet" type="text/css" href="assets/demo.css">

      <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
      <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
      <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

      <script src="dist/jquery.gridster.js" type="text/javascript" charset="utf-8"></script>
      <script src="assets/jquery.kontrol.js"></script>

</head>

<body>

    <div class="controls">
        <button class="js-seralize">Build from Array</button>

        <button class="enableDrag">Drag Enable</button>
        <button class="disableDrag">Drag Disable</button>
        <button class="AddDial">Add Dial</button>
        <button class="AddPad">Add XY Pad</button>
        <button class="AddSlider">Add Slider</button>
         <button class="j2-seralize">Serialize</button>
    </div>

    <div class="gridster">
        <ul>
        </ul>
    </div>




    <script type="text/javascript">


      var gridster;

      // same object than generated with gridster.serialize() method

      var ui_data = [];

      var serialization = [
        {
            col: 1,
            row: 1,
            size_x: 2,
            size_y: 2,
            html: '<li><input type="text" value="75" class="dial2"></li>',
            className: ".dial2",
            type: "dial"
        },
        {
            col: 3,
            row: 2,
            size_x: 2,
            size_y: 2,
            html: '<li style="min-width: 200px; min-height: 200px;"><fieldset class="pad" data-width="200" data-height="200"><legend>XY Pad</legend>x : <input name="x" value=27>y : <input name="y" value=80></fieldset></li>',
            className: ".pad",
            type: "pad"
        },
        {
            col: 3,
            row: 1,
            size_x: 2,
            size_y: 1,
            html: '<li><div style="margin-top: 40px;" id="slider" class="slider1"></div></li>',
            className: ".slider1",
            type: "slider"
        },
        {
            col: 4,
            row: 1,
            size_x: 1,
            size_y: 1,
            html: '<li />'
        },
        {
          col: 1,
          row: 4,
          size_x: 2,
          size_y: 2,
          html: '<li><input type="text" value="75" class="dial3"></li>',
          className: ".dial3",
          type: "dial"
        },
        {
            col: 1,
            row: 3,
            size_x: 1,
            size_y: 1,
            html: '<li />'
        },
        {
            col: 2,
            row: 4,
            size_x: 1,
            size_y: 1,
            html: '<li />'
        },
        {
            col: 2,
            row: 5,
            size_x: 1,
            size_y: 1,
            html: '<li />'
        }
      ];


// Enable and Disable Dragging

      $('.disableDrag').on('click', function() {
            gridster.disable();

          });

          $('.enableDrag').on('click', function() {
                gridster.enable();
              });

// enable/disable end

$('.AddDial').on('click', function() {

      var className = prompt("Please enter your a name for this Dial");
      var classV = "." + className;

      ui_data.push({"className": className, "classV": classV, "type": "dial"});

      var html = '<li><input type="text" value="75" class="' + className + '"></li>';
      gridster.add_widget(html, 2, 2);
      createUI("dial", classV);
    });

$('.AddPad').on('click', function() {

      var className = prompt("Please enter your a name for this XY Pad");
      var classV = "." + className;

      ui_data.push({"className": className, "classV": classV, "type": "pad"});

      var html = '<li style="min-width: 200px; min-height: 200px;"><fieldset class="' + className + '" data-width="200" data-height="200"><legend>XY Pad</legend>x : <input name="x" value=27>y : <input name="y" value=80></fieldset></li>';

      gridster.add_widget(html, 2, 2);
      createUI("pad", classV);
    });

$('.AddSlider').on('click', function() {

      var className = prompt("Please enter your a name for this Slider");
      var classV = "." + className;

      ui_data.push({"className": className, "classV": classV, "type": "slider"});

      var html = '<li><div style="margin-top: 40px;" id="slider" class="' + className + '"></div></li>';
      gridster.add_widget(html, 2, 1, function(data){
        console.log("Widget Added: ", data);
      });
      createUI("slider", classV);
    });

    $('.j2-seralize').on('click', function() {
             var s = gridster.serialize();

          //    console.log($(".gridster").find(".dial2"));

           console.log("log: ", s);
           console.log("ui data: ", ui_data);



            //console.log(gridster.$widgets);
          });
      // sort serialization
      serialization = Gridster.sort_by_row_and_col_asc(serialization);

      $(function(){

        gridster = $(".gridster ul").gridster({
          widget_base_dimensions: [100, 100],
          widget_margins: [5, 5],
          serialize_params: function ($w, wgd) {
            return {
                id: wgd.el[0].id,
                col: wgd.col,
                row: wgd.row,
                htmlContent: $($w).html()
            };
        }
        }).data('gridster');


        $('.js-seralize').on('click', function() {
            gridster.remove_all_widgets();
            $.each(serialization, function() {
                gridster.add_widget(this.html, this.size_x, this.size_y, this.col, this.row);
                createUI(this.type, this.className);

            });

        });

      });


      function createUI(type, className) {

                    switch(type) {
              case "dial":
              var $dial = $(className)
                          .dial({
                              'change':function(e){
                                      console.log(className + ": ",e);
                                  }
                              });
                  break;
              case "pad":
              var $pad = $(className)
                          .xy({
                                  displayPrevious:false
                                  , min : -100
                                  , max : 100
                                  , fgColor:"#222222"
                                  , bgColor:"#EEEEEE"
                                  , change : function (value) {
                                      console.log("change " + className + ": ", value);
                                  }
                              })
                          .css({'border':'5px solid #BBB'});

                  break;
              case "slider":
              var $slider = $(className)
                          .slider({
                              'change':function(event,ui){
                                      console.log(className + ": ",ui.value);
                                  }
                              });
                  break;

            }
      }


</script>
</body>
</html>
